import { Tabs, Tab, PackageManagerTabs } from "@theme";
import YarnProblem from '../../shared/problems/yarnProblem.md'

# Vue3 MF

åœ¨ Vue3 ä¸­ï¼Œæˆ‘ä»¬æä¾›äº†ä¸¤ä¸ªç¤ºä¾‹é¡¹ç›®ä¾›å‚è€ƒï¼š

- `vue3-base`ï¼šåŸºç¡€é¡¹ç›®ï¼Œç”¨äºä¹¦å†™é€šç”¨ä¸šåŠ¡ç»„ä»¶å¯¹å¤–æš´éœ²ï¼Œå®ƒé€šå¸¸æ˜¯ä¸€äº›é¡¹ç›®çš„åŸºçŸ³ã€‚
- `vue3-project`ï¼šåŸºç¡€é¡¹ç›®ï¼Œç”¨äºå’Œå…¶ä»–é€šç”¨ä¸šåŠ¡ç»„ä»¶è¿›è¡Œé›†æˆï¼Œå®ƒé€šå¸¸æ˜¯ä¸€äº›é¡¹ç›®çš„ä¸šåŠ¡é€»è¾‘ã€‚

> ğŸ’¡TIPï¼šä¸¤ä¸ªä¸šåŠ¡çš„ demo ä»…ä»…åªæ˜¯éƒ¨åˆ†ä¾èµ–ä»¥åŠ emp çš„é…ç½®ä¸ä¸€æ ·ï¼Œä½ å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œè‡ªç”±é€‰æ‹©æˆ–è€…ç»„åˆã€‚

## å‰æœŸå‡†å¤‡

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»é…å¤‡äº†å¦‚ä¸‹å¼€å‘ç¯å¢ƒï¼š

- Node.js >= `20.0.0`
- npm >= `8`

> ğŸ’¡TIPï¼šå»ºè®®ä½ ä½¿ç”¨ `nvm` æ¥ç®¡ç† node ç‰ˆæœ¬ï¼Œç›´æ¥æ‰§è¡Œ `nvm use 20` å‘½ä»¤å³å¯å®Œæˆå¼€å‘ç¯å¢ƒè®¾ç½®

### å®‰è£… empâš¡

[å¿«é€Ÿä¸Šæ‰‹](/guide/start/quick-start)

### é¡¹ç›®åˆå§‹åŒ–

åœ¨å¯¹é¡¹ç›®è¿›è¡Œåˆå§‹åŒ–ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå…‹éš† `emp` ä»“åº“ï¼Œå°†ç¤ºä¾‹ä»£ç æ‹‰å–åˆ°æœ¬åœ°ã€‚

```bash
git clone https://github.com/empjs/emp
```

> ğŸš¨ å¦‚æœä½ æ— æ³•æ‹‰å–é¡¹ç›®è‡³æœ¬åœ°ï¼Œè¯·æ£€æŸ¥ä½ çš„ç½‘ç»œç¯å¢ƒæˆ–ä»£ç†è®¾ç½®æ˜¯å¦å¯ä»¥è®¿é—® githubï¼Œå¦‚æœä»ä¸èƒ½è§£å†³ï¼Œè¯·è”ç³»æˆ‘ä»¬ã€‚

åœ¨æ‹‰å–å®Œæˆä»£ç åï¼Œæˆ‘ä»¬è¿›å…¥ä»£ç çš„æ ¹ç›®å½•ï¼Œå®‰è£…é¡¹ç›®ä¾èµ–ï¼Œæ¨èä½¿ç”¨`PNPM`è¿›è¡Œå®‰è£…ï¼š

<PackageManagerTabs command='install' />

## è¿è¡Œç¤ºä¾‹é¡¹ç›®

> ğŸš§ æ³¨æ„ï¼šåœ¨è¿è¡Œç¤ºä¾‹é¡¹ç›®ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»å®Œæˆäº†å‰æœŸå‡†å¤‡ï¼Œå¹¶å½“å‰ç›®å½•å¤„äº `emp` ä»“åº“çš„æ ¹ç›®å½•ä¸‹ã€‚

### vue3 demo

é¦–å…ˆè¿›å…¥ç¤ºä¾‹é¡¹ç›®çš„æ ¹ç›®å½•ï¼š

```bash
# è¿è¡Œ vue-3-base ç¤ºä¾‹é¡¹ç›®
cd demos/vue3
```

ç„¶åè¿è¡Œä»£ç ï¼š

<PackageManagerTabs command='dev' />

è¿è¡ŒæˆåŠŸåï¼Œæ‚¨å¯ä»¥åˆ†åˆ«è®¿é—®`http://localhost:9302/` ä¸ `http://localhost:9301/`è¿›è¡ŒæŸ¥çœ‹ã€‚

#### æ¼”ç¤ºæ•ˆæœ

`:9301` åŸºç«™æ•ˆæœï¼š

<iframe src="https://mf-vue3.sc.empjs.dev/host/"
  style={{width: '100%', height: '1500px', border: `20px solid #aaa`, borderRadius: '4px', overflow: 'hidden'}}
  title="mf-host"
></iframe>

`:9302` åº”ç”¨æ•ˆæœï¼š

<iframe src="https://mf-vue3.sc.empjs.dev/app/"
  style={{width: '100%', height: '1000px', border: `20px solid #aaa`, borderRadius: '4px', overflow: 'hidden'}}
  title="mf-host"
></iframe>


### è¿œç¨‹ç»„ä»¶è°ƒç”¨
```vue title="vue-3-project/src/Home.vue"
<template>
  <div>
    <h1>Vue 3 Project</h1>
    <h2>vue3Base/TableComponent</h2>
    <TableComponent />
    <h2>vue3Base/JSXComponent</h2>
    <JSXComponent />
    <TsxScript attr1="aaa" :attr2="true" />
    <ButtonComponent attr1="bbb" :attr2="true" />
  </div>
</template>

<script lang="ts">
export default {
  name: 'App',
}
</script>

<script lang="ts" setup>
import TableComponent from '@v3/TableComponent'
import JSXComponent from '@v3/JSXComponent'
import TsxScript from '@v3/TsxScript'
import ButtonComponent from '@v3/ButtonComponent'
//
import { onMounted, onUnmounted, onBeforeMount } from 'vue'
onMounted(() => console.log('onMounted'))
onUnmounted(() => console.log('onUnmounted'))
onBeforeMount(() => console.log('onBeforeMount'))

</script>

<style lang="less" scoped></style>

```


### é¡¹ç›®é…ç½®

```ts title="vue-3-base/emp.config.ts"
import {defineConfig} from '@empjs/cli'
import lightningcss from '@empjs/plugin-lightningcss'
import Vue3 from '@empjs/plugin-vue3'
import {pluginRspackEmpShare} from '@empjs/share'
export default defineConfig(() => {
  return {
    plugins: [
      Vue3(),
      lightningcss(),
      pluginRspackEmpShare({
        name: 'vue3Base',
        // dts: {
        //   consumeTypes: true,
        //   generateTypes: {
        //     compilerInstance: 'vue-tsc',
        //   },
        // },
        shared: {
          vue: {
            requiredVersion: '^3',
          },
        },
        exposes: {
          './ButtonComponent': './src/components/ButtonComponent',
          './TableComponent': './src/components/TableComponent',
          './JSXComponent': './src/components/JSXComponent',
          './TsxScript': './src/components/TsxScript',
          './Antd': './src/Antd',
          './Home': './src/Home',
        },
      }),
    ],
    appEntry: 'main.ts',
    server: {port: 9301, open: false},
    html: {title: 'EMP Vue3 Base'},
    debug: {
      clearLog: false,
      showRsconfig: false,
    },
  }
})


```

```ts title="vue-3-project/emp.config.ts"
import {defineConfig} from '@empjs/cli'
import Vue3 from '@empjs/plugin-vue3'
import {pluginRspackEmpShare} from '@empjs/share'
// cf vue3
const deploy = process.env.DEPLOY
const isCf = deploy === 'cloudflare'
//
export default defineConfig(store => {
  const ip = store.getLanIp()
  const vue3Base = isCf ? 'https://mf-vue3.sc.empjs.dev/host/emp.js' : `http://${ip}:9301/emp.js`
  return {
    plugins: [
      Vue3(),
      pluginRspackEmpShare({
        name: 'vue3Project',
        shared: {
          vue: {
            requiredVersion: '^3',
          },
        },
        remotes: {
          '@v3': `vue3Base@${vue3Base}`,
        },
      }),
    ],
    appEntry: 'main.ts',
    server: {port: 9302},
    html: {title: 'EMP Vue3 Projects'},
    debug: {
      clearLog: false,
      showRsconfig: false,
    },
  }
})


```

## å¸¸è§é—®é¢˜

<YarnProblem />